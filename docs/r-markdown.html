<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 R Markdown | Building Skills in Quantitative Biology</title>
  <meta name="description" content="3 R Markdown | Building Skills in Quantitative Biology" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="3 R Markdown | Building Skills in Quantitative Biology" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="3 R Markdown | Building Skills in Quantitative Biology" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 R Markdown | Building Skills in Quantitative Biology" />
  
  <meta name="twitter:description" content="3 R Markdown | Building Skills in Quantitative Biology" />
  

<meta name="author" content="Kim Cuddington, Andrew M. Edwards, Brian Ingalls" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="git-and-github.html"/>
<link rel="next" href="multi.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.4.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- Adding to index.Rmd as per https://stackoverflow.com/questions/41376989/how-to-include-google-analytics-in-an-rmarkdown-generated-github-page -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y14SQ7MY4S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y14SQ7MY4S');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#open-science"><i class="fa fa-check"></i><b>1.1</b> Open Science</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#feedback"><i class="fa fa-check"></i><b>1.2</b> Feedback</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i><b>1.3</b> About the authors</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i><b>1.4</b> Acknowledgments</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#citation"><i class="fa fa-check"></i><b>1.5</b> Citation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="git-and-github.html"><a href="git-and-github.html"><i class="fa fa-check"></i><b>2</b> Git and GitHub</a>
<ul>
<li class="chapter" data-level="2.1" data-path="git-and-github.html"><a href="git-and-github.html#what-are-git-and-github-and-how-might-they-be-useful"><i class="fa fa-check"></i><b>2.1</b> What are Git and GitHub and how might they be useful?</a></li>
<li class="chapter" data-level="2.2" data-path="git-and-github.html"><a href="git-and-github.html#you-just-want-do-download-someone-elses-code-from-their-github-repository"><i class="fa fa-check"></i><b>2.2</b> You just want do download someone else’s code from their GitHub repository</a></li>
<li class="chapter" data-level="2.3" data-path="git-and-github.html"><a href="git-and-github.html#motivation-for-learning-more"><i class="fa fa-check"></i><b>2.3</b> Motivation for learning more</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="git-and-github.html"><a href="git-and-github.html#example-application-pacific-hake-stock-assessment"><i class="fa fa-check"></i><b>2.3.1</b> Example application – Pacific Hake stock assessment</a></li>
<li class="chapter" data-level="2.3.2" data-path="git-and-github.html"><a href="git-and-github.html#examples-of-what-we-can-avoid"><i class="fa fa-check"></i><b>2.3.2</b> Examples of what we can avoid</a></li>
<li class="chapter" data-level="2.3.3" data-path="git-and-github.html"><a href="git-and-github.html#example-of-advantages-that-arise-from-using-github"><i class="fa fa-check"></i><b>2.3.3</b> Example of advantages that arise from using GitHub</a></li>
<li class="chapter" data-level="2.3.4" data-path="git-and-github.html"><a href="git-and-github.html#why-this-course"><i class="fa fa-check"></i><b>2.3.4</b> Why this course?</a></li>
<li class="chapter" data-level="2.3.5" data-path="git-and-github.html"><a href="git-and-github.html#does-it-matter-which-computer-language-my-code-is-in"><i class="fa fa-check"></i><b>2.3.5</b> Does it matter which computer language my code is in?</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="git-and-github.html"><a href="git-and-github.html#getting-set-up-for-the-first-time"><i class="fa fa-check"></i><b>2.4</b> Getting set up for the first time</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="git-and-github.html"><a href="git-and-github.html#what-you-will-end-up-having-installed"><i class="fa fa-check"></i><b>2.4.1</b> What you will end up having installed</a></li>
<li class="chapter" data-level="2.4.2" data-path="git-and-github.html"><a href="git-and-github.html#text-editor"><i class="fa fa-check"></i><b>2.4.2</b> Text Editor</a></li>
<li class="chapter" data-level="2.4.3" data-path="git-and-github.html"><a href="git-and-github.html#install-the-git-application-on-your-machine"><i class="fa fa-check"></i><b>2.4.3</b> Install the Git application on your machine</a></li>
<li class="chapter" data-level="2.4.4" data-path="git-and-github.html"><a href="git-and-github.html#git-shell-guis-and-rstudio"><i class="fa fa-check"></i><b>2.4.4</b> Git shell, GUIs and RStudio</a></li>
<li class="chapter" data-level="2.4.5" data-path="git-and-github.html"><a href="git-and-github.html#powershell-and-posh-git"><i class="fa fa-check"></i><b>2.4.5</b> Powershell and posh-git</a></li>
<li class="chapter" data-level="2.4.6" data-path="git-and-github.html"><a href="git-and-github.html#create-a-directory-to-keep-all-your-git-tracked-work"><i class="fa fa-check"></i><b>2.4.6</b> Create a directory to keep all your Git-tracked work</a></li>
<li class="chapter" data-level="2.4.7" data-path="git-and-github.html"><a href="git-and-github.html#install-diffmerge-optional"><i class="fa fa-check"></i><b>2.4.7</b> Install Diffmerge (optional)</a></li>
<li class="chapter" data-level="2.4.8" data-path="git-and-github.html"><a href="git-and-github.html#save-our-template-.gitconfig-file"><i class="fa fa-check"></i><b>2.4.8</b> Save our template <em>.gitconfig</em> file</a></li>
<li class="chapter" data-level="2.4.9" data-path="git-and-github.html"><a href="git-and-github.html#edit-the-.gitconfig-file"><i class="fa fa-check"></i><b>2.4.9</b> Edit the <em>.gitconfig</em> file</a></li>
<li class="chapter" data-level="2.4.10" data-path="git-and-github.html"><a href="git-and-github.html#github-authorisation"><i class="fa fa-check"></i><b>2.4.10</b> GitHub authorisation</a></li>
<li class="chapter" data-level="2.4.11" data-path="git-and-github.html"><a href="git-and-github.html#navigating-in-a-shell"><i class="fa fa-check"></i><b>2.4.11</b> Navigating in a shell</a></li>
<li class="chapter" data-level="2.4.12" data-path="git-and-github.html"><a href="git-and-github.html#one-time-authentication"><i class="fa fa-check"></i><b>2.4.12</b> One-time authentication</a></li>
<li class="chapter" data-level="2.4.13" data-path="git-and-github.html"><a href="git-and-github.html#mac-only-make-your-output-pretty"><i class="fa fa-check"></i><b>2.4.13</b> MAC only: make your output pretty</a></li>
<li class="chapter" data-level="2.4.14" data-path="git-and-github.html"><a href="git-and-github.html#something-to-view-markdown-files-optional"><i class="fa fa-check"></i><b>2.4.14</b> Something to view Markdown files (optional)</a></li>
<li class="chapter" data-level="2.4.15" data-path="git-and-github.html"><a href="git-and-github.html#bonus-keyboard-shortcut-optional"><i class="fa fa-check"></i><b>2.4.15</b> Bonus keyboard shortcut (optional)</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="git-and-github.html"><a href="git-and-github.html#using-git-and-github-to-share-your-own-code"><i class="fa fa-check"></i><b>2.5</b> Using Git and GitHub to share your own code</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="git-and-github.html"><a href="git-and-github.html#definitions"><i class="fa fa-check"></i><b>2.5.1</b> Definitions</a></li>
<li class="chapter" data-level="2.5.2" data-path="git-and-github.html"><a href="git-and-github.html#creating-a-new-repository"><i class="fa fa-check"></i><b>2.5.2</b> Creating a new repository</a></li>
<li class="chapter" data-level="2.5.3" data-path="git-and-github.html"><a href="git-and-github.html#cloning-your-new-repository"><i class="fa fa-check"></i><b>2.5.3</b> Cloning your new repository</a></li>
<li class="chapter" data-level="2.5.4" data-path="git-and-github.html"><a href="git-and-github.html#committing"><i class="fa fa-check"></i><b>2.5.4</b> Committing</a></li>
<li class="chapter" data-level="2.5.5" data-path="git-and-github.html"><a href="git-and-github.html#exercise-1-create-edit-and-commit-simpletext.txt"><i class="fa fa-check"></i><b>2.5.5</b> Exercise 1: create, edit and commit <em>simpleText.txt</em></a></li>
<li class="chapter" data-level="2.5.6" data-path="git-and-github.html"><a href="git-and-github.html#exercise-2-multiple-files"><i class="fa fa-check"></i><b>2.5.6</b> Exercise 2: multiple files</a></li>
<li class="chapter" data-level="2.5.7" data-path="git-and-github.html"><a href="git-and-github.html#what-to-write-in-commit-messages"><i class="fa fa-check"></i><b>2.5.7</b> What to write in commit messages</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="git-and-github.html"><a href="git-and-github.html#using-git-and-github-to-collaborate-with-colleagues"><i class="fa fa-check"></i><b>2.6</b> Using Git and GitHub to collaborate with colleagues</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="git-and-github.html"><a href="git-and-github.html#demonstration-of-collaborating"><i class="fa fa-check"></i><b>2.6.1</b> Demonstration of collaborating</a></li>
<li class="chapter" data-level="2.6.2" data-path="git-and-github.html"><a href="git-and-github.html#a-bit-more-about-git-rebase"><i class="fa fa-check"></i><b>2.6.2</b> A bit more about git rebase</a></li>
<li class="chapter" data-level="2.6.3" data-path="git-and-github.html"><a href="git-and-github.html#fixing-a-conflict"><i class="fa fa-check"></i><b>2.6.3</b> Fixing a conflict</a></li>
<li class="chapter" data-level="2.6.4" data-path="git-and-github.html"><a href="git-and-github.html#exercise-3-collaborating-on-a-single-repository"><i class="fa fa-check"></i><b>2.6.4</b> Exercise 3: collaborating on a single repository</a></li>
<li class="chapter" data-level="2.6.5" data-path="git-and-github.html"><a href="git-and-github.html#collaborating-summary"><i class="fa fa-check"></i><b>2.6.5</b> Collaborating summary</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="git-and-github.html"><a href="git-and-github.html#workflow-tips-when-collaborating"><i class="fa fa-check"></i><b>2.7</b> Workflow tips when collaborating</a></li>
<li class="chapter" data-level="2.8" data-path="git-and-github.html"><a href="git-and-github.html#beyond-the-basics-of-git-and-github-getting-more-advanced"><i class="fa fa-check"></i><b>2.8</b> Beyond the basics of Git and GitHub – getting more advanced</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="git-and-github.html"><a href="git-and-github.html#so-ive-made-some-changes-but-dont-really-want-to-keep-them-git-stash"><i class="fa fa-check"></i><b>2.8.1</b> So I’ve made some changes but don’t really want to keep them – git stash</a></li>
<li class="chapter" data-level="2.8.2" data-path="git-and-github.html"><a href="git-and-github.html#the-power-to-go-back"><i class="fa fa-check"></i><b>2.8.2</b> The power to go back</a></li>
<li class="chapter" data-level="2.8.3" data-path="git-and-github.html"><a href="git-and-github.html#so-how-does-git-do-all-this"><i class="fa fa-check"></i><b>2.8.3</b> So how does Git do all this?</a></li>
<li class="chapter" data-level="2.8.4" data-path="git-and-github.html"><a href="git-and-github.html#git-terminology"><i class="fa fa-check"></i><b>2.8.4</b> Git terminology</a></li>
<li class="chapter" data-level="2.8.5" data-path="git-and-github.html"><a href="git-and-github.html#branching"><i class="fa fa-check"></i><b>2.8.5</b> Branching</a></li>
<li class="chapter" data-level="2.8.6" data-path="git-and-github.html"><a href="git-and-github.html#pull-requests"><i class="fa fa-check"></i><b>2.8.6</b> Pull requests</a></li>
<li class="chapter" data-level="2.8.7" data-path="git-and-github.html"><a href="git-and-github.html#undoing-stuff"><i class="fa fa-check"></i><b>2.8.7</b> Undoing stuff</a></li>
<li class="chapter" data-level="2.8.8" data-path="git-and-github.html"><a href="git-and-github.html#using-r-and-github-within-rstudio"><i class="fa fa-check"></i><b>2.8.8</b> Using R and GitHub within RStudio</a></li>
<li class="chapter" data-level="2.8.9" data-path="git-and-github.html"><a href="git-and-github.html#feedback-1"><i class="fa fa-check"></i><b>2.8.9</b> Feedback</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>3</b> R Markdown</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-markdown.html"><a href="r-markdown.html#motivation"><i class="fa fa-check"></i><b>3.1</b> Motivation</a></li>
<li class="chapter" data-level="3.2" data-path="r-markdown.html"><a href="r-markdown.html#basic-idea"><i class="fa fa-check"></i><b>3.2</b> Basic idea</a></li>
<li class="chapter" data-level="3.3" data-path="r-markdown.html"><a href="r-markdown.html#simple-example"><i class="fa fa-check"></i><b>3.3</b> Simple example</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="r-markdown.html"><a href="r-markdown.html#exercise-1"><i class="fa fa-check"></i><b>3.3.1</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-markdown.html"><a href="r-markdown.html#output-format"><i class="fa fa-check"></i><b>3.4</b> Output format</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="r-markdown.html"><a href="r-markdown.html#exercise-2"><i class="fa fa-check"></i><b>3.4.1</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="r-markdown.html"><a href="r-markdown.html#caching-advanced"><i class="fa fa-check"></i><b>3.5</b> Caching (advanced)</a></li>
<li class="chapter" data-level="3.6" data-path="r-markdown.html"><a href="r-markdown.html#further-reading"><i class="fa fa-check"></i><b>3.6</b> Further reading</a></li>
<li class="chapter" data-level="3.7" data-path="r-markdown.html"><a href="r-markdown.html#using-rstudio"><i class="fa fa-check"></i><b>3.7</b> Using RStudio</a></li>
<li class="chapter" data-level="3.8" data-path="r-markdown.html"><a href="r-markdown.html#feedback-2"><i class="fa fa-check"></i><b>3.8</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="multi.html"><a href="multi.html"><i class="fa fa-check"></i><b>4</b> Multivariate analysis: Clustering and Ordination</a>
<ul>
<li class="chapter" data-level="4.1" data-path="multi.html"><a href="multi.html#multivariate-resemblance"><i class="fa fa-check"></i><b>4.1</b> Multivariate resemblance</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="multi.html"><a href="multi.html#binary-similarity-metrics"><i class="fa fa-check"></i><b>4.1.1</b> Binary Similarity metrics</a></li>
<li class="chapter" data-level="4.1.2" data-path="multi.html"><a href="multi.html#quantitative-similarity-dissimilarity-metrics"><i class="fa fa-check"></i><b>4.1.2</b> Quantitative similarity &amp; dissimilarity metrics</a></li>
<li class="chapter" data-level="4.1.3" data-path="multi.html"><a href="multi.html#comparing-more-than-two-communitiessamplessitesgenesspecies"><i class="fa fa-check"></i><b>4.1.3</b> Comparing more than two communities/samples/sites/genes/species</a></li>
<li class="chapter" data-level="4.1.4" data-path="multi.html"><a href="multi.html#r-functions"><i class="fa fa-check"></i><b>4.1.4</b> R functions</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="multi.html"><a href="multi.html#cluster-analysis"><i class="fa fa-check"></i><b>4.2</b> Cluster Analysis</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="multi.html"><a href="multi.html#hierarchical-clustering-groups-are-nested-within-other-groups."><i class="fa fa-check"></i><b>4.2.1</b> Hierarchical clustering: groups are nested within other groups.</a></li>
<li class="chapter" data-level="4.2.2" data-path="multi.html"><a href="multi.html#partitional-clustering-and-fuzzy-clustering"><i class="fa fa-check"></i><b>4.2.2</b> Partitional clustering and Fuzzy clustering</a></li>
<li class="chapter" data-level="4.2.3" data-path="multi.html"><a href="multi.html#r-functions-for-clustering"><i class="fa fa-check"></i><b>4.2.3</b> R functions for clustering</a></li>
<li class="chapter" data-level="4.2.4" data-path="multi.html"><a href="multi.html#example-cluster-analysis-of-isotope-data"><i class="fa fa-check"></i><b>4.2.4</b> Example: Cluster analysis of isotope data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="multi.html"><a href="multi.html#Ord"><i class="fa fa-check"></i><b>4.3</b> Ordination</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="multi.html"><a href="multi.html#PCA"><i class="fa fa-check"></i><b>4.3.1</b> Principal Components Analysis (PCA)</a></li>
<li class="chapter" data-level="4.3.2" data-path="multi.html"><a href="multi.html#principle-coordinates-analysis-pcoa"><i class="fa fa-check"></i><b>4.3.2</b> Principle Coordinates Analysis (PCoA)</a></li>
<li class="chapter" data-level="4.3.3" data-path="multi.html"><a href="multi.html#nonmetric-multidimensional-scaling-nmds"><i class="fa fa-check"></i><b>4.3.3</b> Nonmetric Multidimensional Scaling (nMDS)</a></li>
<li class="chapter" data-level="4.3.4" data-path="multi.html"><a href="multi.html#example-nmds-and-pcoa"><i class="fa fa-check"></i><b>4.3.4</b> Example: nMDS and PCoA</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="multi.html"><a href="multi.html#constrained-ordination"><i class="fa fa-check"></i><b>4.4</b> Constrained Ordination</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="multi.html"><a href="multi.html#redundancy-analysis"><i class="fa fa-check"></i><b>4.4.1</b> Redundancy Analysis</a></li>
<li class="chapter" data-level="4.4.2" data-path="multi.html"><a href="multi.html#example-constrained-ordination"><i class="fa fa-check"></i><b>4.4.2</b> Example: Constrained ordination</a></li>
<li class="chapter" data-level="4.4.3" data-path="multi.html"><a href="multi.html#signficance-tests-for-constrained-ordination"><i class="fa fa-check"></i><b>4.4.3</b> Signficance tests for constrained ordination</a></li>
<li class="chapter" data-level="4.4.4" data-path="multi.html"><a href="multi.html#forward-selection-of-explanatory-variables"><i class="fa fa-check"></i><b>4.4.4</b> Forward Selection of explanatory variables</a></li>
<li class="chapter" data-level="4.4.5" data-path="multi.html"><a href="multi.html#tri"><i class="fa fa-check"></i><b>4.4.5</b> Triplots: Graphing a constrained ordination</a></li>
<li class="chapter" data-level="4.4.6" data-path="multi.html"><a href="multi.html#feedback-3"><i class="fa fa-check"></i><b>4.4.6</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="multi.html"><a href="multi.html#references"><i class="fa fa-check"></i><b>4.5</b> References</a></li>
<li class="chapter" data-level="4.6" data-path="multi.html"><a href="multi.html#answer-key"><i class="fa fa-check"></i><b>4.6</b> Answer Key</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html"><i class="fa fa-check"></i><b>5</b> Machine learning and classification</a>
<ul>
<li class="chapter" data-level="5.1" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#logistic-regression"><i class="fa fa-check"></i><b>5.1</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#interpreting-the-logistic-regression"><i class="fa fa-check"></i><b>5.1.1</b> Interpreting the logistic regression</a></li>
<li class="chapter" data-level="5.1.2" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#the-confusion-matrix"><i class="fa fa-check"></i><b>5.1.2</b> The confusion matrix</a></li>
<li class="chapter" data-level="5.1.3" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#roc-and-auc"><i class="fa fa-check"></i><b>5.1.3</b> ROC and AUC</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#cross-validation"><i class="fa fa-check"></i><b>5.2</b> Cross-validation</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#k-fold-cross-validation"><i class="fa fa-check"></i><b>5.2.1</b> k-Fold Cross-Validation</a></li>
<li class="chapter" data-level="5.2.2" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#multiple-logistic-regression"><i class="fa fa-check"></i><b>5.2.2</b> Multiple logistic regression</a></li>
<li class="chapter" data-level="5.2.3" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#examples-of-logistic-regression-used-for-classification"><i class="fa fa-check"></i><b>5.2.3</b> Examples of logistic regression used for classification</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#linear-discriminant-analysis-lda"><i class="fa fa-check"></i><b>5.3</b> Linear Discriminant Analysis (LDA)</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#examples-of-discriminant-analysis-used-for-classification"><i class="fa fa-check"></i><b>5.3.1</b> Examples of discriminant analysis used for classification</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#tree-based-methods-for-classification"><i class="fa fa-check"></i><b>5.4</b> Tree-based methods for classification</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#classification-and-regression-trees-carts"><i class="fa fa-check"></i><b>5.4.1</b> Classification and regression trees (CARTs)</a></li>
<li class="chapter" data-level="5.4.2" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#random-forests"><i class="fa fa-check"></i><b>5.4.2</b> Random Forests</a></li>
<li class="chapter" data-level="5.4.3" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#examples-of-tree-based-methods-used-for-classification"><i class="fa fa-check"></i><b>5.4.3</b> Examples of tree-based methods used for classification</a></li>
<li class="chapter" data-level="5.4.4" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#r-functions-1"><i class="fa fa-check"></i><b>5.4.4</b> R functions</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#artificial-neural-networks-ann"><i class="fa fa-check"></i><b>5.5</b> Artificial Neural Networks (ANN)</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#ann-learning"><i class="fa fa-check"></i><b>5.5.1</b> ANN learning</a></li>
<li class="chapter" data-level="5.5.2" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#our-first-ann"><i class="fa fa-check"></i><b>5.5.2</b> Our first ANN</a></li>
<li class="chapter" data-level="5.5.3" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#examples-of-anns-used-for-classification"><i class="fa fa-check"></i><b>5.5.3</b> Examples of ANNs used for classification</a></li>
<li class="chapter" data-level="5.5.4" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#r-functions-2"><i class="fa fa-check"></i><b>5.5.4</b> R functions</a></li>
<li class="chapter" data-level="5.5.5" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#what-else"><i class="fa fa-check"></i><b>5.5.5</b> What else?</a></li>
<li class="chapter" data-level="5.5.6" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#feedback-4"><i class="fa fa-check"></i><b>5.5.6</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#references-1"><i class="fa fa-check"></i><b>5.6</b> References</a></li>
<li class="chapter" data-level="5.7" data-path="machine-learning-and-classification.html"><a href="machine-learning-and-classification.html#answer-key-1"><i class="fa fa-check"></i><b>5.7</b> Answer Key</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>6</b> Optimization</a>
<ul>
<li class="chapter" data-level="6.1" data-path="optimization.html"><a href="optimization.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="optimization.html"><a href="optimization.html#fundamentals-of-optimization"><i class="fa fa-check"></i><b>6.2</b> Fundamentals of Optimization</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="optimization.html"><a href="optimization.html#fermats-theorem"><i class="fa fa-check"></i><b>6.2.1</b> Fermat’s Theorem</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="optimization.html"><a href="optimization.html#regression"><i class="fa fa-check"></i><b>6.3</b> Regression</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="optimization.html"><a href="optimization.html#linear-regression"><i class="fa fa-check"></i><b>6.3.1</b> Linear Regression</a></li>
<li class="chapter" data-level="6.3.2" data-path="optimization.html"><a href="optimization.html#nonlinear-regression"><i class="fa fa-check"></i><b>6.3.2</b> Nonlinear Regression</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="optimization.html"><a href="optimization.html#iterative-optimization-algorithms"><i class="fa fa-check"></i><b>6.4</b> Iterative Optimization Algorithms</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="optimization.html"><a href="optimization.html#gradient"><i class="fa fa-check"></i><b>6.4.1</b> Gradient Descent</a></li>
<li class="chapter" data-level="6.4.2" data-path="optimization.html"><a href="optimization.html#global-optimization"><i class="fa fa-check"></i><b>6.4.2</b> Global Optimization</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="optimization.html"><a href="optimization.html#calibration-of-dynamic-models"><i class="fa fa-check"></i><b>6.5</b> Calibration of Dynamic Models</a></li>
<li class="chapter" data-level="6.6" data-path="optimization.html"><a href="optimization.html#uncertainty-analysis-and-bayesian-calibration"><i class="fa fa-check"></i><b>6.6</b> Uncertainty Analysis and Bayesian Calibration</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="optimization.html"><a href="optimization.html#feedback-5"><i class="fa fa-check"></i><b>6.6.1</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="optimization.html"><a href="optimization.html#references-2"><i class="fa fa-check"></i><b>6.7</b> References</a></li>
<li class="chapter" data-level="6.8" data-path="optimization.html"><a href="optimization.html#answer-key-2"><i class="fa fa-check"></i><b>6.8</b> Answer Key</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="optimization.html"><a href="optimization.html#exercise-1-2"><i class="fa fa-check"></i><b>6.8.1</b> Exercise 1</a></li>
<li class="chapter" data-level="6.8.2" data-path="optimization.html"><a href="optimization.html#solution"><i class="fa fa-check"></i><b>6.8.2</b> Solution</a></li>
<li class="chapter" data-level="6.8.3" data-path="optimization.html"><a href="optimization.html#exercise-2-2"><i class="fa fa-check"></i><b>6.8.3</b> Exercise 2</a></li>
<li class="chapter" data-level="6.8.4" data-path="optimization.html"><a href="optimization.html#solution-1"><i class="fa fa-check"></i><b>6.8.4</b> Solution</a></li>
<li class="chapter" data-level="6.8.5" data-path="optimization.html"><a href="optimization.html#exercise-3-1"><i class="fa fa-check"></i><b>6.8.5</b> Exercise 3</a></li>
<li class="chapter" data-level="6.8.6" data-path="optimization.html"><a href="optimization.html#solution-2"><i class="fa fa-check"></i><b>6.8.6</b> Solution</a></li>
<li class="chapter" data-level="6.8.7" data-path="optimization.html"><a href="optimization.html#exercise-4-1"><i class="fa fa-check"></i><b>6.8.7</b> Exercise 4</a></li>
<li class="chapter" data-level="6.8.8" data-path="optimization.html"><a href="optimization.html#solution-3"><i class="fa fa-check"></i><b>6.8.8</b> Solution</a></li>
<li class="chapter" data-level="6.8.9" data-path="optimization.html"><a href="optimization.html#exercise-5-1"><i class="fa fa-check"></i><b>6.8.9</b> Exercise 5</a></li>
<li class="chapter" data-level="6.8.10" data-path="optimization.html"><a href="optimization.html#solution-4"><i class="fa fa-check"></i><b>6.8.10</b> Solution</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Building Skills in Quantitative Biology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-markdown" class="section level1" number="3">
<h1><span class="header-section-number">3</span> R Markdown</h1>
<p>This module consists of text, example code, and two exercises to
gently introduce to the world of R Markdown.</p>
<div id="motivation" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Motivation</h2>
<p>Say you were sent some tree data from a colleague, consisting of lengths and diameters
of some trees repeatedly measured over 30 years. You then spent a month writing lots of
R code to analyse the data. Your code also produces beautiful figures and tables,
that you then manually copied into a Word document. You also had to write lots of
text, including calculations such as the simple</p>
<p><code>The average tree height was 10.1 m.</code></p>
<p>Then your colleague sheepishly tells you that someone introduced an error when
extracing the data from their tree-size database, and so
you need to redo everything. Your heart sinks with the prospect
of re-running all your code and making sure you manually copy the correct new
figures into your document. Oh, and you need to redo the tables and check all
the numbers in your text.</p>
<p>The alternative modern approach is to use R Markdown. The idea is that you can
generate a ‘dynamic report.’ You write code that contains a
mixture of your R code <em>and</em> your write up all in one place. You can use this for
short analyses, scientific manuscripts, or even a complete thesis. For shorter
documents you will have a single R Markdown file, and for more complex documents
it’s better to break your work up into individual files that are linked
together, such as chapters for a thesis.</p>
<p>This module is aimed to get biologists started with the
basics without too much extraneous information. Having gone through this module
you will then be in a good position to learn more details from the
online <a href="https://bookdown.org/yihui/rmarkdown" target="_blank">Definitive Guide to R Markdown</a>
and the <a href="https://rmarkdown.rstudio.com/lesson-1.html" target="_blank">RStudio introduction</a>,
which are aimed at a general statistical audience (rather than specifically biologists).</p>
<p>A key concept is that everything is written as code. You do not have to manually
point and click anything, or copy and paste figures between directories. So once
you understand how something works or have figured out some formatting that you
like, you can just copy that code and use it elsewhere.</p>
<p><strong>Example application</strong></p>
<p>A recent 328-page document we wrote in R Markdown is <a href="https://www.dfo-mpo.gc.ca/csas-sccs/Publications/ResDocs-DocRech/2019/2019_041-eng.html" target="_blank">A reproducible data synopsis
for over 100 species of British Columbia
groundfish</a>.
For each of 113 species, we produced two pages of figures:</p>
<p><img src="silvergray-rockfish-1.png" title="First example page showing multiple figures of data." alt="First example page showing multiple figures of data."  /></p>
<p>and</p>
<p><img src="silvergray-rockfish-2.png" title="Second example page showing multiple figures of data." alt="Second example page showing multiple figures of data."  /></p>
<p>Do not worry about the details – the point here is that for each species the
layout of the figures is identical (even to show no data
when none are available). Producing each figure and manually inserting them into
a Word document would be extremely tedious and time-consuming. Instead, the production of the
document is automated using R Markdown.</p>
<p>Furthermore, the work is transparent and traceable. Because the code produces
the figures (they are not pasted in from somewhere), we can trace back from
the R Markdown code to see the R code that:</p>
<ul>
<li>pulled the data from databases</li>
<li>fit models</li>
<li>generated plots.</li>
</ul>
<p>In particular, we intend to periodically update the document as new data become
available. While still a lot of work, it is less daunting knowing that the
code is already available.</p>
<p>On a practical level, the report has allowed anyone to see the data that are available,
and has consequently increased data transparency between Fisheries and Oceans Canada, the
fishing industry, non-governmental organizations, and the public.</p>
<p>This is admittedly a <em>very</em> advanced example with a ton of code (several new R
packages) and work behind it, but the idea is to show you what is possible and
what you can work towards.</p>
</div>
<div id="basic-idea" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Basic idea</h2>
<p>In the above tree example, if using Word, for example, you would have a sentence
that says</p>
<p><code>The average tree height was 10.1 m</code></p>
<p>The “10.1” is hard-wired into your text, and you typed it on from the value
“10.1” that your R code calculated (in a variable you calculated, let’s say you
called it <code>avge_height</code>).</p>
<p>In your R Markdown document you have your R code <em>and</em> your text write up. You
would equivalently have:</p>
<p>Instead of “10.1” you refer <em>directly</em> to the variable <code>avge_height</code> that you
have already calculated. When you ‘render’ your R Markdown document (convert it
from code into .pdf, .html or other formats), it
automatically fills in the <code>avge_height</code> value as “10.1.” The</p>
<p>means that the next bit of code (until the next backtick) should be evaluated
using R, and the result inserted.</p>
<p>This is the basic idea. Then, when your colleague mentions the error (or, say,
provides you with extra data) you can just re-run your
code and the “10.1” will be automatically updated in your document. This concept
extends to your tables and figures – they can all be automatically updated.</p>
</div>
<div id="simple-example" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Simple example</h2>
<p>Here we will generate some data, show some of it in a table, plot it, and show
the results of fitting a simple linear regression. Read through this and then
you will download and run the code in the exercise.</p>
<p><strong>Generate data</strong></p>
<p>First we’ll need some libraries:</p>
<p>Now generate some data:</p>
<pre class="Rout"><code>[1] 50</code></pre>
<p>So we are showing our R code here (we can choose to
hide it if we like), and it has been executed, yielding the printed output of
the value of <code>n</code> (because of the final line of the code).</p>
<p>We can also embed results from R within sentences, for example:</p>
<p>We have a sample size of 50.</p>
<p>This is done (as mentioned above) by the code:</p>
<p>Note that you need the space straight after the <code>r</code>.</p>
<p>We can also automatically say that the maximum value of the data is 506.5564788, or round it to a
whole number: the maximum value of the data is 507. These were done by:</p>
<p><strong>Show some of the data</strong></p>
<p>Let’s combine the data in a tibble (think of it as a data frame if you don’t
know what that is):</p>
<pre class="Rout"><code># A tibble: 50 x 2
       x     y
   &lt;int&gt; &lt;dbl&gt;
 1     1  23.7
 2     2  14.4
 3     3  33.6
 4     4  46.3
 5     5  54.0
 6     6  58.9
 7     7  85.1
 8     8  79.1
 9     9 110. 
10    10  99.4
# ... with 40 more rows</code></pre>
<p>(only the first 10 rows get printed here thanks to dplyr).</p>
To have a proper table, we can do
<table>
<caption>
<span id="tab:kable">Table 3.1: </span>The first rows of my data.
</caption>
<thead>
<tr>
<th style="text-align:right;">
x
</th>
<th style="text-align:right;">
y
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
23.70958
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
14.35302
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
33.63128
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
46.32863
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
54.04268
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
58.93875
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
85.11522
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
79.05341
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
110.18424
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
99.37286
</td>
</tr>
</tbody>
</table>
<p>(If you’re running the code separately the exact style may look different
because of settings we have, but pretty much everything is tweakable with the
<code>kable</code> and <code>kableExtra</code> packages).</p>
<p><strong>Plot then fit a regression data</strong></p>
<p>Now to plot the data:</p>
<p><img src="_main_files/figure-html/plot-1.png" title="Simple plot of the 50 simulated data points." alt="Simple plot of the 50 simulated data points." width="672" /></p>
<p>To fit and then print the summary regression output from R:</p>
<pre class="Rout"><code>
Call:
lm(formula = y ~ x)

Residuals:
    Min      1Q  Median      3Q     Max 
-27.403  -4.366  -1.193   8.319  21.072 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   3.7071     3.2719   1.133    0.263    
x             9.8406     0.1117  88.124   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 11.39 on 48 degrees of freedom
Multiple R-squared:  0.9939,    Adjusted R-squared:  0.9937 
F-statistic:  7766 on 1 and 48 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>And for a report we can produce a simple table (including a caption) of output and the regression fit:</p>
<table>
<caption>
<span id="tab:fit">Table 3.2: </span>Linear regression fit.
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Estimate
</th>
<th style="text-align:right;">
Std. Error
</th>
<th style="text-align:right;">
t value
</th>
<th style="text-align:right;">
Pr(&gt;|t|)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept)
</td>
<td style="text-align:right;">
3.707115
</td>
<td style="text-align:right;">
3.2719100
</td>
<td style="text-align:right;">
1.133012
</td>
<td style="text-align:right;">
0.2628368
</td>
</tr>
<tr>
<td style="text-align:left;">
x
</td>
<td style="text-align:right;">
9.840634
</td>
<td style="text-align:right;">
0.1116686
</td>
<td style="text-align:right;">
88.123530
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
</tbody>
</table>
<p>And create a plot:
<img src="_main_files/figure-html/plotfit-1.png" title="Simple plot of the 50 simulated data points with the fitted regression added in red." alt="Simple plot of the 50 simulated data points with the fitted regression added in red." width="672" /></p>
<p><strong>Now, let’s go back and change the data</strong></p>
<p>The <em>big</em> feature of dynamically generating reports is when you go back and
change or update the input data. For example, changing the data in the above
example and then re-running it to redo the report. The best way to demonstrate
this is for you to do it in Exercise 1.</p>
<div id="exercise-1" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Exercise 1</h3>
<ol style="list-style-type: decimal">
<li><p>In R do <code>library(rmarkdown)</code> to make sure you have the <code>rmarkdown</code>
package. If not then install it with <code>install.packages("rmarkdown")</code>.</p></li>
<li><p>Download <a href="https://raw.githubusercontent.com/quantitative-biology/module-2-rmarkdown/main/rmark-exercise.Rmd" target="_blank">rmark-exercise.Rmd</a>
onto your computer and put it where you want to work on this exercise. Make
sure it is saved as <code>rmark-exercise.Rmd</code> and not <code>rmark-exercise.txt</code>.</p></li>
<li><p>The file is an R Markdown (<code>.Rmd</code>) file that you can run by either doing
<code>rmarkdown::render("rmark-exercise.Rmd")</code>
in R, or clicking the <code>knitr</code> button in RStudio and selecting the <code>.html</code>
option. See the RStudio section at the end of this module for help using RStudio.</p></li>
<li><p>Check that this has produced (‘rendered’) an <code>.html</code> file document that looks
similar to what you
see above (don’t worry if the styling is not identical, but the important
content should be). Note that the <code>.Rmd</code> file is <em>not</em> repeating all the
explanations that we gave above, but is a simplified version containing
the commands, which is why the output won’t be identical. (The exact R Markdown
file, <code>module-2-rmarkdown.Rmd</code>, used to create what you are reading here is
available on the <a href="https://github.com/quantitative-biology/module-2-rmarkdown" target="_blank">GitHub repository for this module</a>).</p></li>
<li><p>Carefully read through the <code>.Rmd</code> file and compare it with what you see in the
resulting <code>.html</code>. There are some comments in there, denoted by
<code>&lt;!-- comment --&gt;</code> to help you, but you should be able to get the idea of how
commands in the <code>.Rmd</code> file translate into output in the <code>.html</code> file.</p></li>
<li><p>Copy the resulting <code>rmark-exercise.html</code> to <code>rmark-exercise-orig.html</code>, change <code>n</code> to 30 in <code>rmark-exercise.Rmd</code>,
and re-render it.</p></li>
<li><p>Compare the two <code>.html</code> files. You have done the same analyses but on
different data. You changed one value, <code>n</code>, and consequently all the
resulting calculations changed, and these are all updated in your new <code>.html</code>
document! You have performed exactly the same analysis on your ‘new’ data,
including creating tables and figures. No copy-and-pasteing of tables, or
manually keeping track of which figure corresponds to which analysis.</p></li>
</ol>
<p>That last bit is the crux of R Markdown. Once you understand that then you
should incorporate it into your workflow. You can easily run identical analyses
on two data sets, or do 10 runs of a model with different parameters, and easily
compare the output.</p>
<p>You can even get a bit clever with your writing by including an R <code>ifelse</code>
statement to somewhat automate the text. Here is the results of some code (that
will be included in the file):</p>
<p>So the maximum value of <span class="math inline">\(y\)</span> is 507, which is
greater than
the special value of 400. The “greater than” or “less than” part is given by</p>
<p>But you have to be careful and think about all possibilities – what if
<span class="math inline">\(y=399.9\)</span>?</p>
</div>
</div>
<div id="output-format" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Output format</h2>
<p>A feature of R Markdown is that you can create output in various different
formats, such as <code>.html</code>, <code>.pdf</code>, and <code>.docx</code> (if you are so inclined). This is
often touted as a great feature – you can simply switch an argument in the
start of your code to switch output formats.</p>
<p>However, in practice, doing biological research and analyses, we have not found
the need to have the same piece of code switch from <code>.html</code> to <code>.pdf</code> output. If
you are writing a manuscript you are going to want it as <code>.pdf</code>, whereas if you
are writing a vignette for an R package (these are done in R Markdown) you will
probably want it as <code>.html</code>. The trouble with switching is that subtle
formatting tweaks may render differently in the different formats, and you may
end up spending a lot of time trying to make things work perfectly for two
outputs – but in practice you may only really need, say, a <code>.pdf</code>.</p>
<p>So we would recommend choosing which output you are going to use (depending on
what you are writing your particular piece of code for), and then sticking with
that. For example, I prefer to do exploratory analyses as <code>.pdf</code> while others may prefer
<code>.html</code>.</p>
<p>To keep it simple, in Exercise 1 we set the output to be <code>.html</code>. For
scientific documents such as manuscripts and theses, a <code>.pdf</code> is preferable. We
will now demonstrate this, for this you will need LaTeX installed.</p>
<p>For decades, LaTeX has been the standard typesetting system for writing
mathematical papers. In 2002, Friedrich Leisch created the R package ‘Sweave,’ to
weave together R code for calculations and LaTeX code for writing up results
into a <code>.pdf</code> file. (It was called <code>Sweave</code> because S was the precursor language to
R, plus I expect Sweave sounded better than
Rweave). Sweave motivated the R package <code>knitr</code> (to knit together R code with text write ups)
by Yihui Xie, which also allows html and other output formats. R Markdown was
then created to allow simpler use of <code>knitr</code>, without learning lots of LaTeX
commands, though you need LaTeX installed to use R Markdown.</p>
<div id="exercise-2" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Exercise 2</h3>
<p>Now download
<a href="https://raw.githubusercontent.com/quantitative-biology/module-2-rmarkdown/main/rmark-pdf-example.Rmd" target="_blank">rmark-pdf-example.Rmd</a>
onto your computer and put it where you want to run it. As before, make
sure it is saved as <code>rmark-pdf-example.Rmd</code> and not <code>rmark-pdf-example.txt</code>.</p>
<p>Try running it as earlier, either using <code>rmarkdown::render("rmark-pdf-example.Rmd")</code>
in R, or clicking the <code>knitr</code> button in RStudio but selecing the <code>knit-as-pdf</code>
option. If it doesn’t run then you
probably need to install LaTeX (you should get a helpful error message). See the
simple instructions in another book by Yhiui Xie et al., the <a href="https://bookdown.org/yihui/rmarkdown-cookbook/install-latex.html" target="_blank">R Markdown
cookbook</a>.</p>
<p>Go through <code>rmark-pdf-example.Rmd</code> carefully, reading the notes in the comments,
and comparing the <code>.Rmd</code> code to the rendered .pdf. I get three warnings (not
errors) like <code>Package xcolor Warning: Incompatible color definition on input line 283.</code> It seems to work so don’t worry if you get them also.</p>
<p>Technial aside: Using those warnings as a teachable moment, this is why I set <code>keep_tex = TRUE</code> in the
YAML header of <code>rmark-pdf-example.Rmd</code>. When you render the document, the
<code>rmarkdown::render()</code> R function uses <code>knitr::knit()</code> to run the R code in your
<code>.Rmd</code> file, and then build a LaTeX <code>.tex</code> file, which is then run by Latex to
build a .pdf. It’s good to be aware that there are several steps going on here,
especially when something doesn’t work. The warning in the
previous paragraph is referring to line 283 of the <code>rmark-pdf-example.tex</code> file
(the <code>.tex</code> file, not the original <code>.Rmd</code> file). The default R Markdown setting
seems to be to delete the <code>.tex</code> file when everything builds okay, and so the
<code>.tex</code> file was getting deleted. So keeping the <code>.tex</code> file can be
helpful to try and debug warnings or errors that need fixing. Generally you want
to fix warnings when you first see them occurring, but sometimes you just have
to leave them in as everything seems to be working as intended (as is the case here).</p>
<p>Also, if you are using Git and GitHub then you would track the <code>.Rmd</code> file using
Git, but add the <code>.tex</code> file to your <code>.gitignore</code> file since it is an output
from the <code>.Rmd</code> file (there is no need for Git to track each version of it).</p>
</div>
</div>
<div id="caching-advanced" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Caching (advanced)</h2>
<p>The two example files ran fairly quickly. So making a small edit to the text and
then re-running the code is not onerous. But if you are producing a large
complex document and you make some minor text edits, then you do not want to
have to wait for it to build (and calculate results that have not changed) to
just check your edits in the resulting <code>.pdf</code> or <code>.html</code>.</p>
<p>You can add the <code>cache=TRUE</code> option to a chunk. The results will then be saved (cached)
and the code in that chunk <em>not rerun</em> when you render the document again,
unless any part of the code in that chunk has changed (e.g. you changed a <code>+</code> to
a <code>-</code>). This is very useful, but you have to be careful and understand how it
works.</p>
<p>To do so, see the <a href="https://bookdown.org/yihui/rmarkdown-cookbook/cache.html" target="_blank">Cache
section</a>
of the <a href="https://bookdown.org/yihui/rmarkdown-cookbook/" target="_blank">R Markdown
Cookbook</a>. While
the authors “do not recommend that you set the chunk option <code>cache = TRUE</code>
globally in a document,” in our own work we have sometimes done this (as often
once the results are finalised we are just editing text). But often we will
clear the cache (remove the directory where all the cached results are saved) to
re-run the document afresh, to guarantee that all results are
reproducible.</p>
<p>Certainly practice on individual chunks first and play around with
caching if you wish to use it in your own work. To get started, in
<code>rmark-pdf-example.Rmd</code> change the <code>cache = FALSE</code> option in the
<code>knitr::opts_chunk$set()</code> call to <code>cache = TRUE</code>. Re-running the code will create two
directories (as named in <code>knitr::opts_chunk$set()</code>) that will saved the cached
versions of chunks and of figures. Re-running the code a second time will then
use those cached values (because of the <code>cache=TRUE</code> setting). Then change a
piece of code and see which cached files change (by seeing when they were saved).</p>
<p>Another workflow is to have one exploratory R Markdown file that includes
the analyses and calculations (and saves the results). Then have a write-up R Markdown
file that loads those results (but does no time-consuming calculations) and
uses them to quickly build tables and figures. If you do have to re-run the
analyses then you can do so using the first file, and the results will get
updated when you then re-run the second file. This would be a good approach for
writing a manuscript or a thesis.</p>
</div>
<div id="further-reading" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Further reading</h2>
<p>As we said, the idea of this module was to give you a simple introduction to
using R Markdown. The <a href="https://bookdown.org/yihui/rmarkdown" target="_blank">Definitive Guide to
R Markdown</a> is highly recommended (and
often where you end up when Googling for how to do something), but you do not
need to understand all of it. For example, I know that Pandoc is doing stuff behind the
scenes, but have managed to not need to understand much more than that. <a href="https://bookdown.org/yihui/rmarkdown/basics.html" target="_blank">Chapter
2</a> goes through the basics,
including many things that we glossed over above, such as more details about
YAML, the code between the <code>---</code> at the top of <code>rmark-exercise.Rmd</code> and
<code>rmark-pdf-example.Rmd</code>. It also explains how R Markdown, despite the ‘R’ in its
name, can also be used for computer languages other than R, such as Python, SQL,
Julia, C, and Fortran.</p>
<p>Also see the related <a href="https://bookdown.org/yihui/rmarkdown-cookbook/" target="_blank">R Markdown
Cookbook</a>,
which provides “practical and relatively short examples to show the interesting
and useful usage of R Markdown,” and supplements the Definitive Guide by making
it less daunting to figure out how to achieve certain tasks by providing a range
of examples. Also see
<a href="https://rmarkdown.rstudio.com/lesson-1.html" target="_blank">RStudio
introduction</a> if
you use RStudio.</p>
<p>Finally, there is an R package
<a href="https://github.com/rstudio/rticles" target="_blank">rticles</a> that includes a
suite of custom R Markdown LaTeX formats for various journals and publishers. We
haven’t tried it, but it looks like it provides some useful templates. At
Fisheries and Oceans Canada we have built our own R package
<a href="https://github.com/pbs-assess/csasdown" target="_blank">csasdown</a> to conform
to stylistic requirements for certain documents.</p>
<p>In practice, once you have something working in the style you like, you can just
copy those settings for each new project. It can be handy to keep a readme file
of containing commands/options/tips that you use a lot.</p>
</div>
<div id="using-rstudio" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Using RStudio</h2>
<p>Here are some screenshots for using RStudio (thanks to Joe Watson).</p>
<p>To knit a document:</p>
<p><img src="Step_1_Knit.png" title="Screenshot showing how to knit in RStudio." alt="Screenshot showing how to knit in RStudio."  /></p>
<p>and then select the format with</p>
<p><img src="Step_2_Choose_Format.png" title="Screenshot showing how to select knit output in RStudio." alt="Screenshot showing how to select knit output in RStudio." style="display: block; margin: auto;" /></p>
<p>Be sure to click the correct format, though RStudio does not seem to over-ride the <code>output</code> option
set in the <code>.Rmd</code> file (in the YAML at the top).</p>
<p>You need to view the .html output in Exercise 1 in a browser, either clicking on
the resulting file or doing:</p>
<p><img src="Step_3_View_in_Dedicated_Browser.png" title="Screenshot showing how to open .html file in RStudio." alt="Screenshot showing how to open .html file in RStudio."  /></p>
<p>To run a line of code you can click Ctrl-Enter, and to run a chunk you can click
on the green triangle:</p>
<p><img src="Step_4_Run_code_within_a_single_chunk.png" title="Screenshot showing how to run a chunk in RStudio." alt="Screenshot showing how to run a chunk in RStudio."  /></p>
<p>and click the green rectangle to run all the preceding chunks also (useful if
variables have changed):</p>
<p><img src="Step_5_Run_all_code_preceding_chunk.png" title="Screenshot showing how to run all code preceding a chunk." alt="Screenshot showing how to run all code preceding a chunk."  /></p>
<p>If you have issues with using a mouse too much, or would rather just type
commands (especially if you have vision issues) and prefer a less cluttered
interface, then I’d recommend <a href="https://ess.r-project.org/" target="_blank">Emacs Speaks
Statistics</a>, which lets you run R
from the text editor Emacs. You can also use Emacs for editing all types of files (it
highlights code very well), so you only need to learn one editor for all your
needs.</p>
</div>
<div id="feedback-2" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Feedback</h2>
<p>We value your input! Please take the time to let us know how we might improve
these materials in <a href="https://forms.gle/vLkcZq7NxPb2ajTQ6" target="_blank">this survey</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="git-and-github.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="multi.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
